<html>
	<head>
	</head>
	<style>
	h2, h3 {
		margin-bottom: 0;
	}
	p, ol, h3 {
		margin-top: 0;
	}
	
	</style>
	<body>
		<a href="../index.php">Etusivu</a>
		<h1>Javascript ja php kurssien harjoitustyön dokumentaatio</h1>
		<h3>Veeti Karttunen, Niki Liuhanen, Aaro Lyytinen</h3>
		
		
		<h2>Sisältö</h2>
		<ol>
			<li>Johdanto</li>
			<li>Suunnitelma</li>
			<li>Toteutus</li>
            <ol>
                <li>JSON</li>
				<li>Ulkoasu</li>
                <li>Tietokannat</li>
                <li>Register & Login</li>
                <li>Arovstelu</li>
                    
            </ol>
			<li>Työskentely</li>
			<ol>				
				<li>Aaro</li>
				<li>Niki</li>
				<li>Veeti</li>
				<li>Haasteet</li>
			</ol>
			<li>Itsearviointi</li>
			<ol>
				<li>Aaro</li>
				<li>Niki</li>
				<li>Veeti</li>
			</ol>
		</ol>
		
		
		<h2>1 Johdanto</h2>
		<p>Työn aiheeksi valittiin verkkosivusto, joka hakee lounasravintoloiden ruokalistat ja esittää nämä ruokalistat yhdellä sivustolla.
		Aihe valittiin, koska lounaspaikan valitseminen on helpompaa jos voi nopeasti ja helposti vertailla eri ravintoloiden ruokia.
		Tämä sivusto on tehty niin sanotusti omaan käyttöön ja täten sen työstämiseen on löytynyt paljon motivaatiota.
		Sivuston ominaisuuksiin kuuluu muun muassa autentikointi, ravintoloiden arviointi, eri ravintoloiden valitseminen omaan käyttöön</p><br>
		
		<h2>2 Suunnitelma</h2>
		<p>Alkuperäinen suunnitelma oli tehdä ruokalistoja listaava sivu ja kehittää kyseistä ideaa pidemmälle.</p><br>
		
		<h2>3 Toteutus</h2>
		<p>Työn toteutuksessa käytettiin javascriptiä, jqueryä, jsonia, bootstrap, mysql sekä php:tä. Aluksi loimme yksinkertaisen html-sivun, johon parsimme ladatut json tiedostot.</p>
        
        <h3>3.1 JSON</h3>
        <p> Ensimmäinen haaste oli saada toimiva ratkaisu json-tiedostojen saamiseksi ja päivittämiseksi. Ensimmäinen versio, jolla toteutimme haun, oli yahoon API. Tämän osoittautuessä epävarmaksi, vaihdoimme yksinkertaiseen linuxilla toteutettuun bash scriptiin. Scripti haki lounaslistat ja tallennsi ne suoraan palvelimelle, hyödyntäen crontab- ja wget-komentoja. Toimivin ratkaisu saatiin php:llä luotu ohjelma, joka tietyn ajoin hakee lounaslistat suoraan palvelimelle.</p>
        
        <h3>3.2 Ulkoasu</h3>
        <p>Sivun ulkoasunmuotoilu oli aikavievää, koska väri- ja tyylisilmä vastaa sokeata kyklooppia, mutta suhteellisen yksinkertaista. Ulkoasussa käytetty bootsrap ja css.</p>
     
        <h3>3.3 Tietokannat</h3>   
        <p>Tietokannat luotiin sisäänkirjautumista, käyttäjäasetuksia ja arvosteluita varten. Tietokantoihin tuli kolme taulua, joista käyttäjän ja käyttä_asetusten välille käytimme viiteavainta.</p>
        
        <h3>3.4 Register & Login</h3>
        <p>Rekisteröityminen sivuille tapahtuu kun käyttäjä syötää käyttäjätunnuksen ja salasanan rekisteröitymis-sivulla. Käyttäjänimen ja salasanan tulee molempien olla vähintään yhden merkin pituisia. Salasanoja saa olla useita samoja eri käyttäjillä, mutta käyttäjänimiä ei voi tietokannoissa olla kuin yksi (uniikki). Php-ohjelma tarkistaa tietokannoista ennen käyttäjätilin luomista onko käyttäjänimi jo olemassa. Salasana häshätään ja suolataan pharlib-kirjastolla jo luomis vaiheessa.</p>

        <p>Sisäänkirjautuminen tapahtuu tietokantojen kautta, jossa tarkistetaan onko käyttäjätunnus ja salasana saman avaimen alla. Sisäänkirjautunut käyttäjän voi muokata omaa profiiliaan. Omassa profiilissa käyttäjä voi valita suosikki ravintolansa, vaihtaa salasanan tai tuhota käyttäjätunnuksensa. Suosikkiravintolat, jotka ovat valittu, tulevat näkyviin etusivun ravintoloiksi. Tämä, koska jos ravintoloita olisi satoja kappaleita, olisi suosiikien seuraaminen nopeampaa ja helpompaa.</p>
        
        <h3>3.5 Arvostelut</h3>
        <p>Arvosteluissa tuli pystyä antamaan ravintolalle tähtiä, kirjallisen arvostelun ja näyttämään annettujen tähtien keskiarvon. 
        Arvostelu toimii vain kirjautuneille käyttäjille, arvostelut tallennetaan ravintoloiden tietokantoihin, jossa voidaan näyttää esimerkiksi kaikki kirjoitetut arvostelut ja tähdet.
        Arvostelu ei käytä hyväksi erillistä sivua, vaan bootsrap:in collapsen avulla luodun elementin kautta.</p><br>    
    
		<h2>4 Työskentely</h2>        		
		<p>Työhön käytettiin noin 50 työtuntia. Useat osiot työssä tehtiin yhdessä, erityisesti haastelliset ja ongelmalliset osa-alueet. </p>
		
		<h3>4.2 Aaro</h3>
		<p>Aaro suunnitteli sivun ulkoasun</p>
		
		<h3>4.3 Niki</h3>
		<p>Niki teki json tiedostojen haun.</p>
		
		<h3>4.4 Veeti</h3>
		<p>Veeti työsti muun muassa viikonpäiväpalkkia, käyttäjä-asetuksia, ruokalistojen parsimista.</p>
		
		<h3>4.5 Haasteet</h3>
		<p>Yksi yllättävä haaste oli lounasravintoloiden ruokalistojen löytäminen, sillä ravintolat harvemmin tarjoaa omia ruokalistojaan 
		julkisesti json tai rss formaatissa. </p>
		
		
		<h2>5 Itsearviointi</h2>
		<h3>5.1 Aaro</h3>
		<p>Vaatimattomasti 5/5 </p>
		
		<h3>5.2 Niki</h3>
		<p></p>
		
		<h3>5.3 Veeti</h3>
		<p></p>
		
	</body>
</html>
